(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},20:function(e,n,t){},38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(14),o=t.n(c),u=(t(20),t(4)),i=t(3),l=t(2),m=t.n(l),s="/api/persons",f=function(){return m.a.get("".concat(s)).then((function(e){return e.data}))},d=function(e){return m.a.post("".concat(s),e).then((function(e){return e.data}))},h=function(e){return m.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},b=function(e){return m.a.put("".concat(s,"/").concat(e.id),e).then((function(e){return e.data}))},p=(t(38),function(e){var n=e.filterNames;return r.a.createElement("div",null,"Filter Phonebook: ",r.a.createElement("input",{onChange:n}))}),E=function(e){var n=e.handleChange,t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"name: ",r.a.createElement("input",{name:"name",onChange:n})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{name:"number",onChange:n})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},v=function(e){var n=e.message;return n?r.a.createElement("div",{className:n.type?n.type:"success"},n.message):null},g=function(e){var n=e.persons,t=e.filter,a=e.handleDelete,c=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return r.a.createElement("div",null,c.map((function(e){return r.a.createElement("li",{key:e.id},e.name," ",e.number,r.a.createElement("button",{onClick:function(){return a(e)}},"delete"))})))},y=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)({}),l=Object(i.a)(o,2),m=l[0],s=l[1],y=Object(a.useState)(""),j=Object(i.a)(y,2),w=j[0],O=j[1],k=Object(a.useState)(null),C=Object(i.a)(k,2),S=C[0],N=C[1];Object(a.useEffect)((function(){f().then((function(e){c(e)}))}),[]);var L=function(){setTimeout((function(){N(null)}),5e3)},P=function(e){window.confirm("".concat(m.name," already exists in the phone book. Replace number?"))&&b(Object(u.a)({},e,{number:m.number})).then((function(n){var a=t.findIndex((function(e){return e.id===n.id})),r=t.concat();r[a]=n,c(r),N({message:"Number updated for ".concat(e.name),type:"success"})})).catch((function(n){N({message:"Failed to change number of ".concat(e.name),type:"error"})})).then((function(){return L()}))};return r.a.createElement("div",{className:"App"},r.a.createElement("h1",{className:"header"},"Phonebook"),r.a.createElement(v,{message:S}),r.a.createElement("h2",null,"Add new"),r.a.createElement(E,{handleChange:function(e){var n=Object(u.a)({},m);n[e.target.name]=e.target.value,s(n)},handleSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name.toLowerCase()===m.name.toLowerCase()}));n?P(n):d(m).then((function(e){c(t.concat(e)),N({message:"".concat(e.name," added to Phonebook"),type:"success"})})).catch((function(e){return N({message:"Failed to add person ".concat(m.name),type:"error"})})).then((function(){return L()}))}}),r.a.createElement("h2",null,"Persons"),r.a.createElement(p,{filterNames:function(e){return O(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(g,{persons:t,filter:w,handleDelete:function(e){window.confirm("Remove ".concat(e.name,"?"))&&h(e.id).then((function(){c(t.filter((function(n){return n.id!==e.id}))),N({message:"".concat(e.name," deleted from the server"),type:"success"})})).catch((function(){N({message:"".concat(e.name," is already deleted from the server"),type:"error"}),c(t.filter((function(n){return n.id!==e.id})))})).then((function(){return L()}))}}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.0a909a6f.chunk.js.map